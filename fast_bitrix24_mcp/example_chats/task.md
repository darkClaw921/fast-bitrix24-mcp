# Примеры работы с задачами Bitrix24

Этот файл содержит примеры типичных диалогов и запросов для работы с задачами в Bitrix24 через MCP сервер.

## 1. Получение информации о полях задач

**Пользователь**: Покажи мне все доступные поля для задач

**Ответ системы**: Использует инструмент `get_all_info_fields(entity=['task'])`

```
task:
  {'ID': 'ID (integer)'}
  {'TITLE': 'TITLE (string)'}
  {'DESCRIPTION': 'DESCRIPTION (text)'}
  {'STATUS': 'STATUS (enumeration):\n  Новая (ID: 1)\n  Ждёт выполнения (ID: 2)\n  Выполняется (ID: 3)\n  Ждёт контроля (ID: 4)\n  Завершена (ID: 5)\n  Отложена (ID: 6)\n  Отклонена (ID: 7)'}
  {'PRIORITY': 'PRIORITY (enumeration):\n  Низкий (ID: 1)\n  Обычный (ID: 2)\n  Высокий (ID: 3)'}
  {'RESPONSIBLE_ID': 'RESPONSIBLE_ID (integer)'}
  {'CREATED_BY': 'CREATED_BY (integer)'}
  {'CREATED_DATE': 'CREATED_DATE (datetime)'}
  {'DEADLINE': 'DEADLINE (datetime)'}
  {'START_DATE_PLAN': 'START_DATE_PLAN (datetime)'}
  {'END_DATE_PLAN': 'END_DATE_PLAN (datetime)'}
```

## 2. Просмотр списка задач

**Пользователь**: Покажи мне все задачи за сегодня

**Система**: Использует `list_tasks(filter_fields={">=CREATED_DATE": "2025-01-22"}, fields_id=["ID", "TITLE", "STATUS", "RESPONSIBLE_ID"])`

```
== ID: 123 - Новая задача ==
  ID: 123
  Название: Новая задача
  Статус: Выполняется
  Исполнитель: 1

== ID: 124 - Важная задача ==
  ID: 124
  Название: Важная задача
  Статус: Новая
  Исполнитель: 2
```

## 3. Фильтрация задач

**Пользователь**: Найди все высокоприоритетные задачи, которые выполняются

**Система**: Использует `list_tasks(filter_fields={"STATUS": "3", "PRIORITY": "2"})`

**Пользователь**: Покажи задачи с просроченным дедлайном

**Система**: Использует `list_tasks(filter_fields={"<DEADLINE": "2025-01-22"})`

## 4. Создание новой задачи

**Пользователь**: Создай задачу "Написать отчет" для пользователя 1 с дедлайном на завтра

**Система**: Использует `create_new_task(fields={"TITLE": "Написать отчет", "RESPONSIBLE_ID": 1, "DEADLINE": "2025-01-23", "PRIORITY": 2})`

```
Задача успешно создана с ID: 125
```

## 5. Обновление задачи

**Пользователь**: Поменяй статус задачи 123 на "Завершена"

**Система**: Использует `update_existing_task(task_id=123, fields={"STATUS": 5})`

```
Задача 123 успешно обновлена
```

## 6. Работа с комментариями

**Пользователь**: Добавь комментарий к задаче 123: "Работа выполнена согласно техническому заданию"

**Система**: Использует `add_comment_to_task(task_id=123, message="Работа выполнена согласно техническому заданию")`

**Пользователь**: Покажи все комментарии к задаче 123

**Система**: Использует `get_task_comments_list(task_id=123)`

```
== КОММЕНТАРИИ К ЗАДАЧЕ 123 ==
Комментарий ID: 45
Автор: 1
Дата: 2025-01-22 15:30:00
Сообщение: Работа выполнена согласно техническому заданию
---
```

## 7. Работа с чеклистами

**Пользователь**: Добавь в чеклист задачи 123 пункты: "Подготовить данные", "Написать текст", "Проверить орфографию"

**Система**: 
1. `add_checklist_item_to_task(task_id=123, title="Подготовить данные")`
2. `add_checklist_item_to_task(task_id=123, title="Написать текст")`
3. `add_checklist_item_to_task(task_id=123, title="Проверить орфографию")`

**Пользователь**: Покажи чеклист задачи 123

**Система**: Использует `get_task_checklist_items(task_id=123)`

```
== ЧЕКЛИСТ ЗАДАЧИ 123 ==
Пункт ID: 11
Название: Подготовить данные
Статус: Не выполнено
---
Пункт ID: 12
Название: Написать текст
Статус: Не выполнено
---
Пункт ID: 13
Название: Проверить орфографию
Статус: Не выполнено
---
```

## 8. Учёт времени выполнения

**Пользователь**: Добавь 2 часа времени выполнения к задаче 123 с комментарием "Работа над отчётом"

**Система**: Использует `add_time_to_task(task_id=123, seconds=7200, comment="Работа над отчётом")`

```
Добавлено время к задаче 123: 2ч 0м 0с
```

**Пользователь**: Покажи учёт времени по задаче 123

**Система**: Использует `get_task_time_tracking(task_id=123)`

```
== ЗАТРАЧЕННОЕ ВРЕМЯ ПО ЗАДАЧЕ 123 ==
Запись ID: 31
Пользователь: 1
Время: 2ч 0м 0с
Комментарий: Работа над отчётом
Дата: 2025-01-22 15:45:00
---

ОБЩЕЕ ВРЕМЯ: 2ч 0м 0с
```

## 9. Аналитика и отчёты

**Пользователь**: Экспортируй все завершённые задачи за последнюю неделю

**Система**: Использует `export_tasks_to_json(filter_fields={"STATUS": "5", ">=CLOSED_DATE": "2025-01-15"})`

```
{
  "entity": "task",
  "count": 15,
  "file_path": "exports/tasks_2025-01-22_15-30-45.json"
}
```

**Пользователь**: Посчитай количество задач по каждому статусу

**Система**: Использует `analyze_tasks_export(file_path="exports/tasks_2025-01-22_15-30-45.json", operation="count", group_by=["STATUS"])`

```
Результат анализа:
Группировка по ['STATUS']:
  STATUS 1: 5 записей
  STATUS 3: 8 записей
  STATUS 5: 15 записей
```

## 10. Сложные запросы

**Пользователь**: Найди все задачи высокого приоритета, которые просрочены и назначены на пользователей 1 или 2

**Система**: Использует `list_tasks(filter_fields={"PRIORITY": "3", "<DEADLINE": "2025-01-22", "RESPONSIBLE_ID": ["1", "2"]})`

**Пользователь**: Покажи среднее время выполнения завершённых задач

**Система**: 
1. `export_tasks_to_json(filter_fields={"STATUS": "5"})`
2. `analyze_tasks_export(file_path="...", operation="avg", fields="DURATION")`

## 11. Удаление

**Пользователь**: Удали комментарий 45 из задачи 123

**Система**: Использует `delete_comment_from_task(task_id=123, comment_id=45)`

**Пользователь**: Удали пункт 12 из чеклиста задачи 123

**Система**: Использует `delete_checklist_item_from_task(task_id=123, item_id=12)`

**Пользователь**: Удали задачу 124

**Система**: Использует `delete_existing_task(task_id=124)`

```
Задача 124 успешно удалена
```

## Частые случаи использования

### Ежедневный отчёт по задачам

```
1. Покажи все мои задачи на сегодня: list_tasks(filter_fields={"RESPONSIBLE_ID": "1", ">=CREATED_DATE": "today"})
2. Покажи просроченные задачи: list_tasks(filter_fields={"<DEADLINE": "today", "STATUS": ["1", "2", "3"]})
3. Добавь время к задаче: add_time_to_task(task_id=123, seconds=3600, comment="Ежедневная работа")
```

### Управление проектом

```
1. Создай задачу с привязкой к сделке: create_new_task(fields={"TITLE": "...", "UF_CRM_TASK": ["D_10"]})
2. Создай подзадачу: create_new_task(fields={"TITLE": "...", "PARENT_ID": 123})
3. Установи зависимости: update_existing_task(task_id=124, fields={"DEPENDS_ON": [123]})
```

### Аналитика команды

```
1. Экспорт всех задач команды: export_tasks_to_json(filter_fields={"RESPONSIBLE_ID": ["1", "2", "3"]})
2. Анализ нагрузки: analyze_tasks_export(..., operation="count", group_by=["RESPONSIBLE_ID", "STATUS"])
3. Анализ времени: analyze_tasks_export(..., operation="sum", fields="DURATION", group_by=["RESPONSIBLE_ID"])
```

Эти примеры демонстрируют основные возможности работы с задачами через MCP сервер fast-bitrix24-mcp.